针对php-fpm进程的管理，需要在php-fpm.conf配置文件中进行修改。进程运行的模式就只有动态(dynamic)和静态(static)。

1. 首先，我们关注一个前提设置： pm = static/dynamic,标识fpm子进程的产生模式。
2. static(静态) ：表示在fpm运行时直接fork出pm.max_chindren个worker进程。
3. dynamic(动态)：表示运行时fork出start_servers个进程，随着负载的情况，动态的调整，最多不超过max_children个进程。
> 一般推荐用static，优点是不用动态的判断负载情况，提升性能，缺点是多占用些系统内存资源。

**max_children**
1. 这个值原则上是越大越好，php-cgi的进程多了就会处理的很快，排队的请求就会很少。
2. 设置”max_children”也需要根据服务器的性能进行设定。
3. 一般来说一台服务器正常情况下每一个php-cgi所耗费的内存在20M左右。
4. 假设“max_children”设置成100个，20M*100=2000M。
5. 也就是说在峰值的时候所有PHP-CGI所耗内存在2000M以内。
6. 假设“max_children”设置的较小，比如5-10个，那么php-cgi就会“很累”，处理速度也很慢，等待的时间也较长。
7. 如果长时间没有得到处理的请求就会出现504 Gateway Time-out这个错误，而正在处理的很累的那几个php-cgi如果遇到了问题就会出现502 Bad gateway这个错误。

**start_servers**
1. pm.start_servers的默认值为2。并且php-fpm中给的计算方式也为：
> {（cpu空闲时等待连接的php的最小子进程数） + （cpu空闲时等待连接的php的最大子进程数 - cpu空闲时等待连接的php的最小子进程数）/ 2}；
用配置表示就是：min_spare_servers + (max_spare_servers - min_spare_servers) / 2；
一般而言，设置成10-20之间的数据足够满足需求了。